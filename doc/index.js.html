<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: index.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: index.js</h1>

    


    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>"use strict";
/**
 * @file tickle main
 * @module tickle
 * @package tickle
 * @subpackage main
 * @version 1.1.1
 * @author hex7c0 &lt;hex7c0@gmail.com>
 * @copyright hex7c0 2014
 * @license GPLv3
 */

/*
 * initialize module
 */
if (!GLOBAL.tickle) {
    GLOBAL.tickle = new TICKLE;
}

/*
 * functions
 */
/**
 * tickle class
 * 
 * @class TICKLE
 */
function TICKLE() {

    this.all = 0;
    this.time = [process.hrtime(),0];
    this.route = Object.create(null);
}

/**
 * reset all routing counter
 * 
 * @function reset
 */
TICKLE.prototype.reset = function() {

    this.all = 0;
    var route = this.route;
    for ( var property in route) {
        route[property] = 0;
    }
    return;
};
/**
 * increase counter
 * 
 * @function add
 * @param {String} path - url path
 * @return {Integer}
 */
TICKLE.prototype.add = function(path) {

    ++this.all;
    var plus = ++this.route[path];
    if (!plus) {
        plus = this.route[path] = 1;
    }
    return plus;
};
/**
 * time per request
 * 
 * @function tpr
 * @return {Float}
 */
TICKLE.prototype.tpr = function() {

    var time = this.time;
    var diff = process.hrtime(time[0]);
    var all = this.all;
    this.time = [process.hrtime(),all];
    return ((diff[0] * 1e9 + diff[1]) / 1000000) / (all - time[1]);
};

/**
 * main
 * 
 * @exports tickle
 * @function tickle
 * @param {Object} req - client request
 * @param {Object} [res] - response to client
 * @param {next} [next] - continue routes
 * @return {Integer|Functions}
 */
module.exports = function tickle(req,res,next) {

    req.tickle = GLOBAL.tickle.add(req.url);
    try {
        return next();
    } catch (TypeError) {
        return req.tickle;
    }
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Modules</h3><ul><li><a href="module-tickle.html">tickle</a></li></ul><h3>Classes</h3><ul><li><a href="module-tickle-TICKLE.html">TICKLE</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha9</a> on Mon Jul 28 2014 10:44:00 GMT+0200 (CEST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
